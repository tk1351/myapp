(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{131:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s=n(1),o=n(0),u=n.n(o),d=n(18),l=n.n(d),j=(n(131),n(5)),b=n(13),p=Object(b.c)({name:"user",initialState:{user:{uid:"",photoUrl:"",displayName:"",role:""}},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user={uid:"",photoUrl:"",displayName:"",role:""}},updateUserProfile:function(e,t){e.user.displayName=t.payload.displayName,e.user.photoUrl=t.payload.photoUrl,e.user.role=t.payload.role}}}),f=p.actions,h=f.login,O=f.logout,m=f.updateUserProfile,x=function(e){return e.auth.user},g=p.reducer,v=n(86),y=(n(135),n(161),n(162),v.a.initializeApp({apiKey:"AIzaSyCJAXHIKZyD8M7CjsBay1aNurBKdSVFFXE",authDomain:"react-myapp-7d6e7.firebaseapp.com",projectId:"react-myapp-7d6e7",databaseURL:"https://react-myapp-7d6e7.firebaseio.com",storageBucket:"react-myapp-7d6e7.appspot.com",messagingSenderId:"306369017008",appId:"1:306369017008:web:9ac2e5d238f02828b3b775"})),w=(y.firestore(),y.auth()),k=y.storage(),_=new v.a.auth.GoogleAuthProvider,C=n(6),I=n.n(C),A=n(11),S=n(12),U=n(17),P=n(22),D=n(34),F=Object(D.a)(),N=n(189),W=n(204),q=n(199),R=n(200),L=n(195),E=n(194),M=n(113),V=n.n(M),B=n(30),z=n(16),T=n(191),G=n(201),Y=n(206),H=n(202),X=n(196),J=n(63),K=n.n(J),Z=n(33),Q=n(23),$=n.n(Q),ee=Object(b.b)("category/fetchCategoriesData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/category",e.next=3,$.a.get("/api/v1/category");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),te=Object(b.c)({name:"category",initialState:{categories:[],status:"idle",error:null},reducers:{},extraReducers:(r={},Object(S.a)(r,ee.pending,(function(e,t){e.status="loading"})),Object(S.a)(r,ee.fulfilled,(function(e,t){e.status="succeeded",e.categories=e.categories.concat(t.payload)})),Object(S.a)(r,ee.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),r)}),ne=function(e){return e.categoriesData.categories},re=te.reducer,ae=Object(b.b)("posts/fetchPostData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/post",e.next=3,$.a.get("/api/v1/post");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),ce=Object(b.b)("posts/addNewPost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/post",e.next=3,$.a.post("/api/v1/post",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object(b.b)("posts/updatePost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,$.a.put(n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),se=Object(b.b)("posts/deletePost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,$.a.delete(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oe=Object(b.b)("posts/deletePostWithPostArgument",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,$.a.delete(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ue=Object(b.b)("posts/deletePostWithSinglePostArgument",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,$.a.delete(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),de=Object(b.b)("posts/deleteUsersPost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/user/".concat(t.uid),e.next=3,$.a.delete(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object(b.c)({name:"posts",initialState:{posts:[],status:"idle",error:null},reducers:{},extraReducers:(a={},Object(S.a)(a,ae.pending,(function(e,t){e.status="loading"})),Object(S.a)(a,ae.fulfilled,(function(e,t){e.status="succeeded",e.posts=e.posts.concat(t.payload)})),Object(S.a)(a,ae.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,ce.fulfilled,(function(e,t){e.posts.push(t.payload)})),Object(S.a)(a,ce.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,ie.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload._id}));e.posts.splice(n,1,t.payload)})),Object(S.a)(a,ie.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,se.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(a,se.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,oe.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(a,oe.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,ue.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(a,ue.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,de.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(a,de.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),a)}),je=function(e){return e.postData.posts},be=le.reducer,pe=n(193),fe=Object(N.a)((function(e){return Object(W.a)({root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}})})),he=function(){var e=fe();return Object(s.jsx)(T.a,{component:"main",maxWidth:"xs",children:Object(s.jsx)("div",{className:e.root,children:Object(s.jsx)(pe.a,{})})})},Oe=function(e){var t=e.children,n=Object(o.useState)({isLoading:!0}),r=Object(z.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){var e=w.onAuthStateChanged((function(t){c({isLoading:!1,user:t}),e()}))}),[]),Object(s.jsx)(T.a,{component:"main",maxWidth:"xs",children:a.isLoading?Object(s.jsx)("div",{children:Object(s.jsx)(he,{})}):Object(s.jsx)(s.Fragment,{children:a.user?Object(s.jsx)(s.Fragment,{children:t}):Object(s.jsx)(P.c,{history:F,children:Object(s.jsx)(P.a,{to:"/"})})})})},me=Object(N.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),xe={title:"",text:"",categoryId:"",url:"",uid:"",fav:0,_id:"",createdAt:null},ge=function(){var e=me(),t=Object(o.useState)(null),n=Object(z.a)(t,2),r=n[0],a=n[1],c=Object(j.c)(x),i=Object(j.c)(ne),u=Object(j.c)((function(e){return e.categoriesData.status})),d=Object(j.b)();Object(o.useEffect)((function(){"idle"===u&&d(ee())}),[u,d]);var l=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a,i,s,o,u,l,j;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!r){e.next=25;break}return a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,i=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return a[e%a.length]})).join(""),s=i+"_"+r.name,e.next=8,k.ref("images/".concat(s)).put(r);case 8:return e.next=10,k.ref("images").child(s).getDownloadURL();case 10:return n=e.sent,e.prev=11,o=Object(B.a)(Object(B.a)({},t),{},{uid:c.uid,fav:0,image:n}),e.next=15,d(ce(o));case 15:u=e.sent,Object(b.d)(u),F.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,l=Object(B.a)(Object(B.a)({},t),{},{uid:c.uid,fav:0}),e.next=29,d(ce(l));case 29:j=e.sent,Object(b.d)(j),F.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){e.target.files[0]&&(a(e.target.files[0]),e.target.value="")};return Object(s.jsx)(Oe,{children:Object(s.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(E.a,{component:"h1",variant:"h6",children:"\u8a18\u4e8b\u3092\u6295\u7a3f\u3059\u308b"}),Object(s.jsx)(Z.b,{initialValues:xe,onSubmit:function(e){l(e)},children:function(t){var n=t.values,r=t.handleChange;return Object(s.jsxs)(Z.a,{children:[Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5546\u54c1\u540d",name:"title",type:"text",value:n.title,onChange:r,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u672c\u6587",name:"text",type:"text",multiline:!0,rows:10,value:n.text,onChange:r,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,select:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u30ab\u30c6\u30b4\u30ea\u30fc",name:"categoryId",type:"text",value:n.categoryId,onChange:r,required:!0,children:i.map((function(e){return Object(s.jsx)(Y.a,{value:e._id,children:e.name},e.name)}))}),Object(s.jsx)(H.a,{children:Object(s.jsx)(L.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(K.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:p})]})})}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:n.url,onChange:r,required:!0}),Object(s.jsx)(X.a,{type:"submit",variant:"contained",color:"primary",className:e.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})})},ve=n(89),ye=n.n(ve),we=n(207),ke=Object(b.b)("users/fetchAvatars",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/user",e.next=3,$.a.get("/api/v1/user");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),_e=Object(b.b)("users/updateUserProfile",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/user/".concat(t.uid),e.next=3,$.a.put(n,t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(b.b)("users/deleteUser",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/user/".concat(t.uid),e.next=3,$.a.delete(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=Object(b.c)({name:"users",initialState:{users:[],status:"idle",error:null},reducers:{},extraReducers:(c={},Object(S.a)(c,ke.pending,(function(e,t){e.status="loading"})),Object(S.a)(c,ke.fulfilled,(function(e,t){e.status="suceeded",e.users=e.users.concat(t.payload)})),Object(S.a)(c,ke.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,_e.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.uid===t.payload.uid}));e.users.splice(n,1,t.payload)})),Object(S.a)(c,_e.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,Ce.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e._id===t.meta.arg._id}));e.users.splice(n,1)})),Object(S.a)(c,Ce.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),c)}),Ae=function(e){return e.userData.users},Se=Ie.reducer,Ue=function(e){return ye.a.locale("ja"),ye()(e).format("YYYY/MM/DD")},Pe=function(e){var t=e.props,n=Object(j.c)(x),r=Object(j.c)(ne),a=Object(j.c)(je),c=Object(j.c)(Ae),i=Object(j.b)(),o=a.find((function(e){return e.uid===n.uid}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:Ue(t.createdAt)}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(t.uid),children:["Author: ",function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(t.uid)]})}),Object(s.jsx)("h1",{children:t.title}),Object(s.jsx)("p",{children:t.text}),t.image&&Object(s.jsx)(we.a,{src:t.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc: ",function(e){var t;return null===(t=r.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(t.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(t._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===o||void 0===o?void 0:o.uid)===t.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(t._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return function(e){window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&i(se(e))}(t)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})},De=Object(b.b)("comments/fetchCommentsData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/comment",e.next=3,$.a.get("/api/v1/comment");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),Fe=Object(b.b)("comments/addNewComment",function(){var e=Object(A.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/comment",e.next=3,$.a.post("/api/v1/comment",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ne=Object(b.c)({name:"comments",initialState:{comments:[],status:"idle",error:null},reducers:{},extraReducers:(i={},Object(S.a)(i,De.pending,(function(e,t){e.status="loading"})),Object(S.a)(i,De.fulfilled,(function(e,t){e.status="succeeded",e.comments=e.comments.concat(t.payload)})),Object(S.a)(i,De.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(i,Fe.fulfilled,(function(e,t){e.comments.push(t.payload)})),Object(S.a)(i,Fe.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),i)}),We=function(e){return e.commentData.comments},qe=Ne.reducer,Re=Object(N.a)((function(e){return Object(W.a)({root:{"& > *":{marginTop:e.spacing(2)}}})})),Le=function(e){for(var t=e.postsPerPage,n=e.totalPosts,r=e.paginate,a=Re(),c=[],i=1;i<=Math.ceil(n/t);i++)c.push(i);return Object(s.jsx)("div",{className:a.root,children:Object(s.jsx)("ul",{children:c.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)("button",{onClick:function(){return r(e)},children:e})},e)}))})})},Ee=function(){var e=Object(j.c)(ne);return Object(s.jsx)(P.c,{history:F,children:e.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(U.a,{to:"/category/".concat(e._id),children:e.name})},e._id)}))})},Me=function(){var e,t=Object(o.useState)(1),n=Object(z.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(5),i=Object(z.a)(c,1)[0],u=Object(j.c)(x),d=Object(j.c)(je),l=Object(j.c)(Ae),b=Object(j.c)((function(e){return e.postData.status})),p=Object(j.c)((function(e){return e.userData.status})),f=Object(j.c)((function(e){return e.categoriesData.status})),h=Object(j.c)((function(e){return e.commentData.status})),O=Object(j.b)(),m=d.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),g=r*i,v=g-i,y=m.slice(v,g);Object(o.useEffect)((function(){w.onAuthStateChanged((function(e){e?function(){var t=Object(A.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,$.a.post("/api/v1/user",{uid:e.uid,username:e.displayName,photoUrl:e.photoURL,role:"user"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}()():console.log("\u672a\u30ed\u30b0\u30a4\u30f3")})),ke(),"idle"===b&&O(ae()),"idle"===p&&O(ke()),"idle"===f&&O(ee()),"idle"===h&&O(De())}),[u,b,p,f,h,O]);var k=function(e){var t;return null===(t=l.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl};return Object(s.jsxs)(Oe,{children:["Feed",(null===(e=y[0])||void 0===e?void 0:e._id)&&Object(s.jsx)(s.Fragment,{children:null===y||void 0===y?void 0:y.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(we.a,{src:k(e.uid)}),Object(s.jsx)(Pe,{props:e},e._id)]})}))}),Object(s.jsx)(Le,{postsPerPage:i,totalPosts:m.length,paginate:function(e){return a(e)}}),Object(s.jsx)(Ee,{})]})},Ve=n(197),Be=n(198),ze=n(164),Te=n(203),Ge=n(80),Ye=n.n(Ge),He=n(110),Xe=n.n(He),Je=n(108),Ke=n.n(Je),Ze=n(109),Qe=n.n(Ze),$e=n(81),et=n.n($e),tt=Object(N.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1606638436412-23517031f19a?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=668&q=80)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},modal:{outline:"none",position:"absolute",width:400,borderRadius:10,backgroundColor:"white",boxShadow:e.shadows[5],padding:e.spacing(10)}}})),nt=function(){var e=tt(),t=Object(j.b)(),n=Object(o.useState)(""),r=Object(z.a)(n,2),a=r[0],c=r[1],i=Object(o.useState)(""),u=Object(z.a)(i,2),d=u[0],l=u[1],b=Object(o.useState)(""),p=Object(z.a)(b,2),f=p[0],h=p[1],O=Object(o.useState)(!0),x=Object(z.a)(O,2),g=x[0],v=x[1],y=Object(o.useState)(""),C=Object(z.a)(y,2),S=C[0],U=C[1],P=Object(o.useState)(!1),D=Object(z.a)(P,2),N=D[0],W=D[1],q=Object(o.useState)(null),R=Object(z.a)(q,2),M=R[0],V=R[1],B=function(){var e=Object(A.a)(I.a.mark((function e(){var n,r,c,i,s,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createUserWithEmailAndPassword(a,d);case 2:if(r=e.sent,c="",!M){e.next=14;break}return i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,s=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return i[e%i.length]})).join(""),o=s+"_"+M.name,e.next=11,k.ref("avatars/".concat(o)).put(M);case 11:return e.next=13,k.ref("avatars").child(o).getDownloadURL();case 13:c=e.sent;case 14:return e.next=16,null===(n=r.user)||void 0===n?void 0:n.updateProfile({displayName:f,photoURL:c});case 16:return t(m({displayName:f,photoUrl:c,role:"user"})),e.next=19,F.push("/feed");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signInWithEmailAndPassword(a,d);case 2:if("admin@example.com"!==a){e.next=7;break}return e.next=5,F.push("/admin");case 5:e.next=9;break;case 7:return e.next=9,F.push("/feed");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signInWithPopup(_).catch((function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.sendPasswordResetEmail(S).then((function(){W(!1),U("")})).catch((function(e){alert(e.message),U("")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=!a||d.length<6,Z=!f||!a||d.length<6||!M;return Object(s.jsxs)(Ve.a,{container:!0,component:"main",className:e.root,children:[Object(s.jsx)(Be.a,{}),Object(s.jsx)(Ve.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(s.jsx)(Ve.a,{item:!0,xs:12,sm:8,md:5,component:ze.a,elevation:6,square:!0,children:Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(we.a,{className:e.avatar,children:Object(s.jsx)(Ke.a,{})}),Object(s.jsx)(E.a,{component:"h1",variant:"h5","data-testid":"h1",children:g?"Login":"Register"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,children:[!g&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(G.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,"data-testid":"username",id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:f,onChange:function(e){h(e.target.value)}}),Object(s.jsx)(H.a,{textAlign:"center",children:Object(s.jsx)(L.a,{children:Object(s.jsxs)("label",{children:[Object(s.jsx)(Qe.a,{fontSize:"large",className:M?et.a.login_addIconLoaded:et.a.login_addIcon}),Object(s.jsx)("input",{className:et.a.login_hiddenIcon,type:"file",onChange:function(e){e.target.files[0]&&(V(e.target.files[0]),e.target.value="")}})]})})})]}),Object(s.jsx)(G.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,"data-testid":"email",id:"email","aria-label":"Email Address",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:a,onChange:function(e){c(e.target.value)}}),Object(s.jsx)(G.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password","aria-label":"Password",label:"Password",type:"password","data-testid":"password",id:"password",autoComplete:"current-password",value:d,onChange:function(e){l(e.target.value)}}),Object(s.jsx)(X.a,{disabled:g?K:Z,fullWidth:!0,variant:"contained",color:"primary",className:e.submit,"data-testid":"authButton",onClick:g?Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))):Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:g?"Login":"Register"}),Object(s.jsxs)(Ve.a,{container:!0,children:[Object(s.jsx)(Ve.a,{item:!0,xs:!0,children:Object(s.jsx)("span",{onClick:function(){return W(!0)},children:"Forgot password?"})}),Object(s.jsx)(Ve.a,{item:!0,"aria-label":"changeScreen",children:Object(s.jsx)("span",{onClick:function(){return v(!g)},children:g?"Create new account?":"Back to login"})})]}),Object(s.jsx)(X.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,startIcon:Object(s.jsx)(Xe.a,{}),onClick:Y,children:"Sign In with Google"})]}),Object(s.jsx)(Te.a,{open:N,onClose:function(){return W(!1)},children:Object(s.jsx)("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.modal,children:Object(s.jsxs)("div",{children:[Object(s.jsx)(G.a,{InputLabelProps:{shrink:!0},type:"email",name:"email",label:"Reset Email",value:S,onChange:function(e){U(e.target.value)}}),Object(s.jsx)(L.a,{onClick:J,children:Object(s.jsx)(Ye.a,{})})]})})})]})})]})},rt=[{_id:"",uid:"",categoryId:"",title:"",text:"",image:"",url:"",fav:0,createdAt:null}],at=function(){var e=Object(o.useState)(rt),t=Object(z.a)(e,2),n=t[0],r=t[1],a=Object(j.c)((function(e){return e.queryParams})).slice(-1)[0].values.q,c=Object(j.c)(Ae),i=Object(j.c)(ne);Object(o.useEffect)((function(){d()}),[]);var u=n.slice().sort((function(e,t){return Ue(t.createdAt).localeCompare(Ue(e.createdAt))})),d=function(){var e=Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/search/posts?q=".concat(a),e.prev=1,e.next=4,$.a.get(t).then((function(e){r(e.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){var t;return null===(t=i.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},b=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"\u691c\u7d22\u7d50\u679c"}),u.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(we.a,{src:b(e.uid)}),Object(s.jsx)("p",{children:Ue(e.createdAt)}),Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),e.image&&Object(s.jsx)(we.a,{src:e.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc: ",l(e.categoryId)]})]})}))]})},ct=n(111),it=n.n(ct),st={_id:"",uid:"",photoUrl:"",text:"",createdAt:null},ot=function(e){var t=e.match.params.id,n=Object(o.useState)(!1),r=Object(z.a)(n,2),a=r[0],c=r[1],i=Object(j.c)(je),u=Object(j.c)(ne),d=Object(j.c)(Ae),l=Object(j.c)(We),p=Object(j.c)(x),f=Object(j.b)(),h=i.find((function(e){return e._id===t})),O=Object(j.c)((function(e){return e.userData.status})),m=Object(j.c)((function(e){return e.categoriesData.status}));Object(o.useEffect)((function(){"idle"===m&&f(ee()),"idle"===O&&f(ke())}),[m,O,f]);var g=d.find((function(e){return e.uid===h.uid})),v=l.filter((function(e){return e.postId===h._id})),y=function(e){var t;return null===(t=d.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username},w=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(B.a)(Object(B.a)({},t),{},{photoUrl:p.photoUrl,uid:p.uid,postId:h._id}),e.next=4,f(Fe(n));case 4:r=e.sent,Object(b.d)(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=i.find((function(e){return e.uid===p.uid})),_=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&(f(ue(t)),F.push("/feed"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)(we.a,{src:g.photoUrl}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(h.uid),children:["Author: ",function(e){var t;return null===(t=d.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(h.uid)]})}),Object(s.jsx)("h1",{children:h.title}),Object(s.jsx)("p",{children:h.text}),h.image&&Object(s.jsx)(we.a,{src:h.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",function(e){var t;return null===(t=u.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(h.categoryId)]}),(null===k||void 0===k?void 0:k.uid)===h.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(h._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return _(h)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{}),Object(s.jsx)(it.a,{onClick:function(){return c(!a)}}),a&&Object(s.jsxs)(s.Fragment,{children:[v.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)(we.a,{src:e.photoUrl}),Object(s.jsxs)("span",{children:["@",y(e.uid)]}),Object(s.jsx)("span",{children:e.text})]},e._id)})),Object(s.jsx)(Z.b,{initialValues:st,onSubmit:function(e){w(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Z.a,{children:Object(s.jsx)(G.a,{variant:"outlined",id:"outlined-basic",label:"\u30b3\u30e1\u30f3\u30c8",name:"text",type:"text",value:t.text,onChange:n,required:!0})}),Object(s.jsx)(X.a,{type:"submit",children:Object(s.jsx)(Ye.a,{})})]})}})]}),Object(s.jsx)(Ee,{})]})},ut=Object(N.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),dt=function(e){var t=e.match.params.id,n=Object(j.c)((function(e){return e.postData.posts.find((function(e){return e._id===t}))})),r={_id:n._id,uid:n.uid,title:n.title,text:n.text,categoryId:n.categoryId,url:n.url,fav:n.fav,image:n.image},a=ut(),c=Object(o.useState)(null),i=Object(z.a)(c,2),u=i[0],d=i[1],l=Object(j.c)(ne),p=Object(j.c)((function(e){return e.categoriesData.status})),f=Object(j.b)();Object(o.useEffect)((function(){"idle"===p&&f(ee())}),[p,f]);var h=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r,a,c,i,s,o,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!u){e.next=25;break}return r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,a=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return r[e%r.length]})).join(""),c=a+"_"+u.name,e.next=8,k.ref("images/".concat(c)).put(u);case 8:return e.next=10,k.ref("images").child(c).getDownloadURL();case 10:return n=e.sent,e.prev=11,i=Object(B.a)(Object(B.a)({},t),{},{image:n}),e.next=15,f(ie(i));case 15:s=e.sent,Object(b.d)(s),F.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,o=Object(B.a)(Object(B.a)({},t),{},{image:""}),e.next=29,f(ie(o));case 29:d=e.sent,Object(b.d)(d),F.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e.target.files[0]&&(d(e.target.files[0]),e.target.value="")};return Object(s.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(E.a,{component:"h1",variant:"h6",children:"\u8a18\u4e8b\u3092\u7de8\u96c6\u3059\u308b"}),Object(s.jsx)(Z.b,{initialValues:r,onSubmit:function(e){h(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(Z.a,{children:[Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5546\u54c1\u540d",name:"title",type:"text",value:t.title,onChange:n,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u672c\u6587",name:"text",type:"text",multiline:!0,rows:10,value:t.text,onChange:n,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,select:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u30ab\u30c6\u30b4\u30ea\u30fc",name:"categoryId",type:"text",value:t.categoryId,onChange:n,required:!0,children:l.map((function(e){return Object(s.jsx)(Y.a,{value:e._id,children:e.name},e.name)}))}),Object(s.jsx)(H.a,{children:Object(s.jsx)(L.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(K.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:O})]})})}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:t.url,onChange:n,required:!0}),Object(s.jsx)(X.a,{type:"submit",variant:"contained",color:"primary",className:a.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})},lt=function(e){var t=e.match.params.id,n=Object(o.useState)(1),r=Object(z.a)(n,2),a=r[0],c=r[1],i=Object(o.useState)(5),u=Object(z.a)(i,1)[0],d=Object(j.c)(Ae),l=Object(j.c)(je),b=Object(j.c)(ne),p=Object(j.c)(x),f=Object(j.c)((function(e){return e.categoriesData.status})),h=Object(j.b)(),O=d.find((function(e){return e.uid===t})),m=l.filter((function(e){return e.uid===O.uid})),g=m.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),v=a*u,y=v-u,w=g.slice(y,v);Object(o.useEffect)((function(){"idle"===f&&h(ee())}),[f,h]);var k=function(e){var t;return null===(t=b.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},_=l.find((function(e){return e.uid===p.uid})),C=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&h(oe(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)(we.a,{src:O.photoUrl}),Object(s.jsxs)("p",{children:["\u30e6\u30fc\u30b6\u30fc\u540d\uff1a",O.username]}),Object(s.jsxs)("p",{children:["\u6240\u5c5e\uff1a ",O.company]}),Object(s.jsxs)("p",{children:["\u5f79\u8077\uff1a ",O.position]}),Object(s.jsxs)("p",{children:["\u81ea\u5df1\u7d39\u4ecb\uff1a ",O.bio]}),Object(s.jsx)("p",{children:O.url}),Object(s.jsxs)("h1",{children:[O.username,"\u3055\u3093\u306e\u6295\u7a3f\u8a18\u4e8b"]}),m&&w.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",k(e.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(e._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===_||void 0===_?void 0:_.uid)===O.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(e._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return C(e)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})})),Object(s.jsx)(Le,{postsPerPage:u,totalPosts:g.length,paginate:function(e){return c(e)}}),Object(s.jsx)(Ee,{})]})},jt=Object(N.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),bt=function(e){var t=e.match,n=Object(o.useState)(null),r=Object(z.a)(n,2),a=r[0],c=r[1],i=t.params.id,u=jt(),d=Object(j.c)(Ae),l=Object(j.b)(),p=d.find((function(e){return e.uid===i})),f={uid:p.uid,username:p.username,photoUrl:p.photoUrl,company:p.company,position:p.position,bio:p.bio,url:p.url},h=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r,c,i,s,o,u,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!a){e.next=25;break}return r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,c=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return r[e%r.length]})).join(""),i=c+"_"+a.name,e.next=8,k.ref("images/".concat(i)).put(a);case 8:return e.next=10,k.ref("images").child(i).getDownloadURL();case 10:return n=e.sent,e.prev=11,s=Object(B.a)(Object(B.a)({},t),{},{image:n,uid:p.uid}),e.next=15,l(_e(s));case 15:o=e.sent,Object(b.d)(o),F.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,u=Object(B.a)(Object(B.a)({},t),{},{image:p.photoUrl,uid:p.uid}),e.next=29,l(_e(u));case 29:d=e.sent,Object(b.d)(d),F.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e.target.files[0]&&(c(e.target.files[0]),e.target.value="")};return Object(s.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(E.a,{component:"h1",variant:"h6",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u7de8\u96c6\u3059\u308b"}),Object(s.jsx)(Z.b,{initialValues:f,onSubmit:function(e){h(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(Z.a,{children:[Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"username",name:"username",type:"text",value:t.username,onChange:n,required:!0}),Object(s.jsx)(H.a,{children:Object(s.jsx)(L.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(K.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:O})]})})}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"company",name:"company",type:"text",value:t.company,onChange:n,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5f79\u8077",name:"position",type:"text",value:t.position,onChange:n,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"bio",name:"bio",type:"text",multiline:!0,rows:10,value:t.bio,onChange:n,required:!0}),Object(s.jsx)(G.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:t.url,onChange:n,required:!0}),Object(s.jsx)(X.a,{type:"submit",variant:"contained",color:"primary",className:u.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})},pt=function(){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"404 - Not Found!"})})},ft=function(e){var t,n=e.match.params.id,r=Object(j.c)(je),a=Object(j.c)(ne),c=Object(j.c)(Ae),i=Object(j.c)(x),o=Object(j.b)(),u=r.filter((function(e){return e.categoryId===n})),d=a.find((function(e){return e._id===n})).name,l=u.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),b=function(e){var t;return null===(t=a.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},p=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username},f=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl},h=r.find((function(e){return e.uid===i.uid})),O=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&o(oe(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:d}),(null===(t=l[0])||void 0===t?void 0:t._id)&&Object(s.jsx)(s.Fragment,{children:null===l||void 0===l?void 0:l.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(we.a,{src:f(e.uid)}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(e.uid),children:["Author: ",p(e.uid)]})}),Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",b(e.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(e._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===h||void 0===h?void 0:h.uid)===e.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(e._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return O(e)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})}))}),Object(s.jsx)(Ee,{})]})},ht=function(){var e=Object(j.c)((function(e){return e.postData.status})),t=Object(j.c)((function(e){return e.userData.status})),n=Object(j.c)((function(e){return e.categoriesData.status})),r=Object(j.b)();return Object(o.useEffect)((function(){"idle"===e&&r(ae()),"idle"===t&&r(ke()),"idle"===n&&r(ee())}),[e,t,n,r]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u7ba1\u7406\u753b\u9762"}),Object(s.jsx)("button",{onClick:Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signOut();case 2:return e.next=4,F.push("/login");case 4:case"end":return e.stop()}}),e)}))),children:"logout"}),Object(s.jsxs)("p",{children:[Object(s.jsx)(U.a,{to:"/admin/post",children:"\u6295\u7a3f\u8a18\u4e8b\u7ba1\u7406"}),Object(s.jsx)(U.a,{to:"/admin/user",children:"\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406"})]})]})},Ot=function(){var e=Object(j.c)(Ae),t=Object(j.b)(),n=e.filter((function(e){return"user"===e.role}));console.log(n);var r=function(){var e=Object(A.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){e.next=5;break}return e.next=3,t(Ce(n));case 3:return e.next=5,t(de(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u753b\u9762"}),n&&Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)("ul",{children:e.username}),Object(s.jsx)("button",{onClick:function(){return r(e)},children:"\u524a\u9664"})]},e.uid)}))})]})},mt=function(){var e,t=Object(o.useState)(1),n=Object(z.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(5),i=Object(z.a)(c,1)[0],u=Object(j.c)(je).slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),d=r*i,l=d-i,b=u.slice(l,d);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u6295\u7a3f\u8a18\u4e8b\u7ba1\u7406\u753b\u9762"}),(null===(e=b[0])||void 0===e?void 0:e._id)&&Object(s.jsx)(s.Fragment,{children:b.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:e.title}),Object(s.jsx)(U.a,{to:"/admin/post/".concat(e._id),children:"\u8a73\u7d30\u3092\u78ba\u8a8d\u3059\u308b"})]})}))}),Object(s.jsx)(Le,{postsPerPage:i,totalPosts:u.length,paginate:function(e){return a(e)}})]})},xt=function(e){var t=e.match.params.id,n=Object(j.c)(je),r=Object(j.c)(ne),a=Object(j.c)(Ae),c=Object(j.b)(),i=n.find((function(e){return e._id===t})),o=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&(c(ue(t)),F.push("/admin/post"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u8a18\u4e8b\u8a73\u7d30"}),Object(s.jsxs)("p",{children:["Author: ",function(e){var t;return null===(t=a.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(i.uid)]}),Object(s.jsx)("h1",{children:i.title}),Object(s.jsx)("p",{children:i.text}),i.image&&Object(s.jsx)(we.a,{src:i.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",function(e){var t;return null===(t=r.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(i.categoryId)]}),Object(s.jsx)("button",{onClick:function(){return o(i)},children:"\u524a\u9664"})]})},gt=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u3042\u306a\u305f\u306e\u30d3\u30b8\u30cd\u30b9\u306b\u5f79\u7acb\u3064ICT\u88fd\u54c1\u304c\u304d\u3063\u3068\u898b\u3064\u304b\u308b!"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:Object(s.jsx)(P.c,{history:F,children:Object(s.jsx)(U.a,{to:"/login",children:"\u30ed\u30b0\u30a4\u30f3\u30fb\u65b0\u898f\u767b\u9332\u306f\u3053\u3061\u3089\u304b\u3089"})})}),Object(s.jsx)("h3",{children:"\u5e45\u5e83\u3044\u88fd\u54c1\u60c5\u5831\u3092\u7db2\u7f85!"})]})]})},vt=function(){var e=Object(j.c)((function(e){return e.queryParams})).slice(-1)[0].values.q;return Object(s.jsx)("div",{children:Object(s.jsxs)(P.d,{children:[Object(s.jsx)(P.b,{exact:!0,path:"/",component:gt}),Object(s.jsx)(P.b,{exact:!0,path:"/feed",component:Me}),Object(s.jsx)(P.b,{exact:!0,path:"/add",component:ge}),Object(s.jsx)(P.b,{exact:!0,path:"/login",component:nt}),Object(s.jsx)(P.b,{exact:!0,path:"/search?q=".concat(e),component:at}),Object(s.jsx)(P.b,{exact:!0,path:"/post/detail/:id",component:ot}),Object(s.jsx)(P.b,{exact:!0,path:"/post/edit/:id",component:dt}),Object(s.jsx)(P.b,{exact:!0,path:"/user/profile/:id",component:lt}),Object(s.jsx)(P.b,{exact:!0,path:"/user/edit/:id",component:bt}),Object(s.jsx)(P.b,{exact:!0,path:"/category/:id",component:ft}),Object(s.jsx)(P.b,{exact:!0,path:"/admin",component:ht}),Object(s.jsx)(P.b,{exact:!0,path:"/admin/user",component:Ot}),Object(s.jsx)(P.b,{exact:!0,path:"/admin/post",component:mt}),Object(s.jsx)(P.b,{exact:!0,path:"/admin/post/:id",component:xt}),Object(s.jsx)(P.b,{component:pt})]})})},yt=n(31),wt=n(205),kt=n(112),_t=n.n(kt),Ct=Object(b.c)({name:"search",initialState:[{values:{q:""}}],reducers:{searchPosts:function(e,t){e.push(t.payload)}}}),It=Ct.actions.searchPosts,At=Ct.reducer,St=Object(N.a)((function(e){return Object(W.a)({search:Object(S.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(yt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(yt.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(S.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})})})),Ut={q:""},Pt=function(){var e=St(),t=Object(o.useState)(Ut),n=Object(z.a)(t,2),r=(n[0],n[1]),a=Object(j.b)();return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:e.search,children:[Object(s.jsx)("div",{className:e.searchIcon,children:Object(s.jsx)(_t.a,{})}),Object(s.jsx)(Z.b,{initialValues:Ut,onSubmit:function(e){!function(e){e&&(a(It({values:e})),r(Ut))}(e),F.push({pathname:"/search?q=".concat(e.q),state:{values:e}})},children:function(t){var n=t.values,r=t.handleChange;return Object(s.jsx)(Z.a,{children:Object(s.jsx)(wt.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},value:n.q,onChange:r,name:"q",type:"search"})})}})]})})},Dt=Object(N.a)((function(e){return Object(W.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(S.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(S.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(S.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})})),Ft=function(){var e,t=Dt(),n=Object(j.c)(x),r=null===(e=Object(j.c)(Ae).find((function(e){return e.uid===n.uid})))||void 0===e?void 0:e.role,a=[{key:"1",path:"/feed",name:"Feed"},{key:"2",path:"/add",name:"\u6295\u7a3f"},{key:"3",path:"/user/edit/".concat(n.uid),name:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4"}],c=[{key:"1",path:"/login",name:"\u30ed\u30b0\u30a4\u30f3"}],i=[{key:"1",path:"/admin",name:"\u7ba1\u7406\u753b\u9762"}],o=n?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("p",{children:n.displayName})}):Object(s.jsx)(s.Fragment,{});return Object(s.jsxs)(P.c,{history:F,children:[Object(s.jsx)("div",{className:t.grow,children:Object(s.jsx)(q.a,{position:"static",children:Object(s.jsxs)(R.a,{children:[Object(s.jsx)(L.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer",children:Object(s.jsx)(V.a,{})}),Object(s.jsx)(E.a,{className:t.title,variant:"h6",noWrap:!0,children:"MyApp"}),"user"===r?Object(s.jsxs)(s.Fragment,{children:[a.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})),Object(s.jsx)("button",{onClick:Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signOut();case 2:return e.next=4,F.push("/login");case 4:case"end":return e.stop()}}),e)}))),children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})]}):"admin"===r?i.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})):c.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})),o,Object(s.jsx)(Pt,{}),Object(s.jsx)("div",{className:t.grow})]})})}),Object(s.jsx)(vt,{})]})},Nt=function(){var e=Object(j.b)();return Object(o.useEffect)((function(){var t=w.onAuthStateChanged((function(t){e(t?h({uid:t.uid,photoUrl:t.photoURL,displayName:t.displayName}):O())}));return function(){t()}}),[e]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ft,{})})},Wt=Object(b.a)({reducer:{auth:g,postData:be,userData:Se,categoriesData:re,queryParams:At,commentData:qe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(s.jsx)(u.a.StrictMode,{children:Object(s.jsx)(j.a,{store:Wt,children:Object(s.jsx)(Nt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports={login_toggleMode:"Auth_login_toggleMode__1q3nF",login_modal:"Auth_login_modal__2XUe2",login_reset:"Auth_login_reset__1CRmT",login_hiddenIcon:"Auth_login_hiddenIcon__3EEOO",login_addIcon:"Auth_login_addIcon__2hF6-",login_addIconLoaded:"Auth_login_addIconLoaded__30_sD"}}},[[159,1,2]]]);
//# sourceMappingURL=main.92d8a0f8.chunk.js.map