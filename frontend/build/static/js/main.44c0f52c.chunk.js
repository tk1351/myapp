(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{131:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a,r,c,i,s=n(1),o=n(0),u=n.n(o),d=n(18),l=n.n(d),j=(n(131),n(5)),b=n(13),p=Object(b.c)({name:"user",initialState:{user:{uid:"",photoUrl:"",displayName:"",role:""}},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user={uid:"",photoUrl:"",displayName:"",role:""}},updateUserProfile:function(e,t){e.user.displayName=t.payload.displayName,e.user.photoUrl=t.payload.photoUrl,e.user.role=t.payload.role}}}),f=p.actions,h=f.login,O=f.logout,m=f.updateUserProfile,x=function(e){return e.auth.user},g=p.reducer,v=n(86),y=(n(135),n(161),n(162),v.a.initializeApp({apiKey:"AIzaSyCJAXHIKZyD8M7CjsBay1aNurBKdSVFFXE",authDomain:"react-myapp-7d6e7.firebaseapp.com",projectId:"react-myapp-7d6e7",databaseURL:"https://react-myapp-7d6e7.firebaseio.com",storageBucket:"react-myapp-7d6e7.appspot.com",messagingSenderId:"306369017008",appId:"1:306369017008:web:9ac2e5d238f02828b3b775"})),w=(y.firestore(),y.auth()),k=y.storage(),_=new v.a.auth.GoogleAuthProvider,C=n(6),I=n.n(C),A=n(11),S=n(12),U=n(17),P=n(189),D=n(204),F=n(192),N=n(193),W=n(194),q=n(195),R=n(109),L=n.n(R),E=n(16),M=n(33),V=n(31),B=n(205),z=n(108),T=n.n(z),G=Object(b.c)({name:"search",initialState:[{values:{q:""}}],reducers:{searchPosts:function(e,t){e.push(t.payload)}}}),Y=G.actions.searchPosts,H=G.reducer,X=n(34),J=Object(X.a)(),K=Object(P.a)((function(e){return Object(D.a)({search:Object(S.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(S.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})})})),Z={q:""},Q=function(){var e=K(),t=Object(o.useState)(Z),n=Object(E.a)(t,2),a=(n[0],n[1]),r=Object(j.b)();return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:e.search,children:[Object(s.jsx)("div",{className:e.searchIcon,children:Object(s.jsx)(T.a,{})}),Object(s.jsx)(M.b,{initialValues:Z,onSubmit:function(e){!function(e){e&&(r(Y({values:e})),a(Z))}(e),J.push({pathname:"/search?q=".concat(e.q),state:{values:e}})},children:function(t){var n=t.values,a=t.handleChange;return Object(s.jsx)(M.a,{children:Object(s.jsx)(B.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},value:n.q,onChange:a,name:"q",type:"search"})})}})]})})},$=n(23),ee=n.n($),te=Object(b.b)("users/fetchAvatars",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/user",e.next=3,ee.a.get("/api/v1/user");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),ne=Object(b.b)("users/updateUserProfile",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/user/".concat(t.uid),e.next=3,ee.a.put(n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(b.b)("users/deleteUser",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/user/".concat(t.uid),e.next=3,ee.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(b.c)({name:"users",initialState:{users:[],status:"idle",error:null},reducers:{},extraReducers:(a={},Object(S.a)(a,te.pending,(function(e,t){e.status="loading"})),Object(S.a)(a,te.fulfilled,(function(e,t){e.status="suceeded",e.users=e.users.concat(t.payload)})),Object(S.a)(a,te.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,ne.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e.uid===t.payload.uid}));e.users.splice(n,1,t.payload)})),Object(S.a)(a,ne.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(a,ae.fulfilled,(function(e,t){var n=e.users.findIndex((function(e){return e._id===t.meta.arg._id}));e.users.splice(n,1)})),Object(S.a)(a,ae.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),a)}),ce=function(e){return e.userData.users},ie=re.reducer,se=Object(P.a)((function(e){return Object(D.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(S.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(S.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(S.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})})),oe=function(){var e,t=se(),n=Object(j.c)(x),a=null===(e=Object(j.c)(ce).find((function(e){return e.uid===n.uid})))||void 0===e?void 0:e.role,r=[{key:"1",path:"/feed",name:"Feed"},{key:"2",path:"/add",name:"\u6295\u7a3f"},{key:"3",path:"/user/edit/".concat(n.uid),name:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4"}],c=[{key:"1",path:"/login",name:"\u30ed\u30b0\u30a4\u30f3"}],i=[{key:"1",path:"/admin",name:"\u7ba1\u7406\u753b\u9762"}],o=n?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("p",{children:n.displayName})}):Object(s.jsx)(s.Fragment,{});return Object(s.jsx)("div",{className:t.grow,children:Object(s.jsx)(F.a,{position:"static",children:Object(s.jsxs)(N.a,{children:[Object(s.jsx)(W.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer",children:Object(s.jsx)(L.a,{})}),Object(s.jsx)(q.a,{className:t.title,variant:"h6",noWrap:!0,children:"MyApp"}),"user"===a?Object(s.jsxs)(s.Fragment,{children:[r.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})),Object(s.jsx)("button",{onClick:Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signOut();case 2:return e.next=4,J.push("/login");case 4:case"end":return e.stop()}}),e)}))),children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})]}):"admin"===a?i.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})):c.map((function(e){return Object(s.jsx)(U.a,{to:e.path,children:e.name},e.key)})),o,Object(s.jsx)(Q,{}),Object(s.jsx)("div",{className:t.grow})]})})})},ue=n(22),de=n(30),le=n(196),je=n(201),be=n(206),pe=n(202),fe=n(198),he=n(63),Oe=n.n(he),me=Object(b.b)("category/fetchCategoriesData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/category",e.next=3,ee.a.get("/api/v1/category");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),xe=Object(b.c)({name:"category",initialState:{categories:[],status:"idle",error:null},reducers:{},extraReducers:(r={},Object(S.a)(r,me.pending,(function(e,t){e.status="loading"})),Object(S.a)(r,me.fulfilled,(function(e,t){e.status="succeeded",e.categories=e.categories.concat(t.payload)})),Object(S.a)(r,me.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),r)}),ge=function(e){return e.categoriesData.categories},ve=xe.reducer,ye=Object(b.b)("posts/fetchPostData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/post",e.next=3,ee.a.get("/api/v1/post");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),we=Object(b.b)("posts/addNewPost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/post",e.next=3,ee.a.post("/api/v1/post",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ke=Object(b.b)("posts/updatePost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,ee.a.put(n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_e=Object(b.b)("posts/deletePost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,ee.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(b.b)("posts/deletePostWithPostArgument",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,ee.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=Object(b.b)("posts/deletePostWithSinglePostArgument",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/".concat(t._id),e.next=3,ee.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=Object(b.b)("posts/deleteUsersPost",function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/v1/post/user/".concat(t.uid),e.next=3,ee.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se=Object(b.c)({name:"posts",initialState:{posts:[],status:"idle",error:null},reducers:{},extraReducers:(c={},Object(S.a)(c,ye.pending,(function(e,t){e.status="loading"})),Object(S.a)(c,ye.fulfilled,(function(e,t){e.status="succeeded",e.posts=e.posts.concat(t.payload)})),Object(S.a)(c,ye.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,we.fulfilled,(function(e,t){e.posts.push(t.payload)})),Object(S.a)(c,we.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,ke.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.payload._id}));e.posts.splice(n,1,t.payload)})),Object(S.a)(c,ke.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,_e.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(c,_e.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,Ce.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(c,Ce.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,Ie.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(c,Ie.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(c,Ae.fulfilled,(function(e,t){var n=e.posts.findIndex((function(e){return e._id===t.meta.arg._id}));e.posts.splice(n,1)})),Object(S.a)(c,Ae.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),c)}),Ue=function(e){return e.postData.posts},Pe=Se.reducer,De=n(197),Fe=Object(P.a)((function(e){return Object(D.a)({root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}})})),Ne=function(){var e=Fe();return Object(s.jsx)(le.a,{component:"main",maxWidth:"xs",children:Object(s.jsx)("div",{className:e.root,children:Object(s.jsx)(De.a,{})})})},We=function(e){var t=e.children,n=Object(o.useState)({isLoading:!0}),a=Object(E.a)(n,2),r=a[0],c=a[1];return Object(o.useEffect)((function(){var e=w.onAuthStateChanged((function(t){c({isLoading:!1,user:t}),e()}))}),[]),Object(s.jsx)(le.a,{component:"main",maxWidth:"xs",children:r.isLoading?Object(s.jsx)("div",{children:Object(s.jsx)(Ne,{})}):Object(s.jsx)(s.Fragment,{children:r.user?Object(s.jsx)(s.Fragment,{children:t}):Object(s.jsx)(ue.c,{history:J,children:Object(s.jsx)(ue.a,{to:"/"})})})})},qe=Object(P.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Re={title:"",text:"",categoryId:"",url:"",uid:"",fav:0,_id:"",createdAt:null},Le=function(){var e=qe(),t=Object(o.useState)(null),n=Object(E.a)(t,2),a=n[0],r=n[1],c=Object(j.c)(x),i=Object(j.c)(ge),u=Object(j.c)((function(e){return e.categoriesData.status})),d=Object(j.b)();Object(o.useEffect)((function(){"idle"===u&&d(me())}),[u,d]);var l=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r,i,s,o,u,l,j;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!a){e.next=25;break}return r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,i=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return r[e%r.length]})).join(""),s=i+"_"+a.name,e.next=8,k.ref("images/".concat(s)).put(a);case 8:return e.next=10,k.ref("images").child(s).getDownloadURL();case 10:return n=e.sent,e.prev=11,o=Object(de.a)(Object(de.a)({},t),{},{uid:c.uid,fav:0,image:n}),e.next=15,d(we(o));case 15:u=e.sent,Object(b.d)(u),J.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,l=Object(de.a)(Object(de.a)({},t),{},{uid:c.uid,fav:0}),e.next=29,d(we(l));case 29:j=e.sent,Object(b.d)(j),J.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){e.target.files[0]&&(r(e.target.files[0]),e.target.value="")};return Object(s.jsx)(We,{children:Object(s.jsxs)(le.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(q.a,{component:"h1",variant:"h6",children:"\u8a18\u4e8b\u3092\u6295\u7a3f\u3059\u308b"}),Object(s.jsx)(M.b,{initialValues:Re,onSubmit:function(e){l(e)},children:function(t){var n=t.values,a=t.handleChange;return Object(s.jsxs)(M.a,{children:[Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5546\u54c1\u540d",name:"title",type:"text",value:n.title,onChange:a,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u672c\u6587",name:"text",type:"text",multiline:!0,rows:10,value:n.text,onChange:a,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,select:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u30ab\u30c6\u30b4\u30ea\u30fc",name:"categoryId",type:"text",value:n.categoryId,onChange:a,required:!0,children:i.map((function(e){return Object(s.jsx)(be.a,{value:e._id,children:e.name},e.name)}))}),Object(s.jsx)(pe.a,{children:Object(s.jsx)(W.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(Oe.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:p})]})})}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:n.url,onChange:a,required:!0}),Object(s.jsx)(fe.a,{type:"submit",variant:"contained",color:"primary",className:e.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})})},Ee=n(89),Me=n.n(Ee),Ve=n(207),Be=function(e){return Me.a.locale("ja"),Me()(e).format("YYYY/MM/DD")},ze=function(e){var t=e.props,n=Object(j.c)(x),a=Object(j.c)(ge),r=Object(j.c)(Ue),c=Object(j.c)(ce),i=Object(j.b)(),o=r.find((function(e){return e.uid===n.uid}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:Be(t.createdAt)}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(t.uid),children:["Author: ",function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(t.uid)]})}),Object(s.jsx)("h1",{children:t.title}),Object(s.jsx)("p",{children:t.text}),t.image&&Object(s.jsx)(Ve.a,{src:t.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc: ",function(e){var t;return null===(t=a.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(t.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(t._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===o||void 0===o?void 0:o.uid)===t.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(t._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return function(e){window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&i(_e(e))}(t)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})},Te=Object(b.b)("comments/fetchCommentsData",Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/comment",e.next=3,ee.a.get("/api/v1/comment");case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))),Ge=Object(b.b)("comments/addNewComment",function(){var e=Object(A.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/v1/comment",e.next=3,ee.a.post("/api/v1/comment",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ye=Object(b.c)({name:"comments",initialState:{comments:[],status:"idle",error:null},reducers:{},extraReducers:(i={},Object(S.a)(i,Te.pending,(function(e,t){e.status="loading"})),Object(S.a)(i,Te.fulfilled,(function(e,t){e.status="succeeded",e.comments=e.comments.concat(t.payload)})),Object(S.a)(i,Te.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(S.a)(i,Ge.fulfilled,(function(e,t){e.comments.push(t.payload)})),Object(S.a)(i,Ge.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),i)}),He=function(e){return e.commentData.comments},Xe=Ye.reducer,Je=Object(P.a)((function(e){return Object(D.a)({root:{"& > *":{marginTop:e.spacing(2)}}})})),Ke=function(e){for(var t=e.postsPerPage,n=e.totalPosts,a=e.paginate,r=Je(),c=[],i=1;i<=Math.ceil(n/t);i++)c.push(i);return Object(s.jsx)("div",{className:r.root,children:Object(s.jsx)("ul",{children:c.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)("button",{onClick:function(){return a(e)},children:e})},e)}))})})},Ze=function(){var e=Object(j.c)(ge);return Object(s.jsx)(ue.c,{history:J,children:e.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(U.a,{to:"/category/".concat(e._id),children:e.name})},e._id)}))})},Qe=function(){var e,t=Object(o.useState)(1),n=Object(E.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(5),i=Object(E.a)(c,1)[0],u=Object(j.c)(x),d=Object(j.c)(Ue),l=Object(j.c)(ce),b=Object(j.c)((function(e){return e.postData.status})),p=Object(j.c)((function(e){return e.userData.status})),f=Object(j.c)((function(e){return e.categoriesData.status})),h=Object(j.c)((function(e){return e.commentData.status})),O=Object(j.b)(),m=d.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),g=a*i,v=g-i,y=m.slice(v,g);Object(o.useEffect)((function(){w.onAuthStateChanged((function(e){e?function(){var t=Object(A.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,ee.a.post("/api/v1/user",{uid:e.uid,username:e.displayName,photoUrl:e.photoURL,role:"user"});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}()():console.log("\u672a\u30ed\u30b0\u30a4\u30f3")})),te(),"idle"===b&&O(ye()),"idle"===p&&O(te()),"idle"===f&&O(me()),"idle"===h&&O(Te())}),[u,b,p,f,h,O]);var k=function(e){var t;return null===(t=l.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl};return Object(s.jsxs)(We,{children:["Feed",(null===(e=y[0])||void 0===e?void 0:e._id)&&Object(s.jsx)(s.Fragment,{children:null===y||void 0===y?void 0:y.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a,{src:k(e.uid)}),Object(s.jsx)(ze,{props:e},e._id)]})}))}),Object(s.jsx)(Ke,{postsPerPage:i,totalPosts:m.length,paginate:function(e){return r(e)}}),Object(s.jsx)(Ze,{})]})},$e=n(199),et=n(200),tt=n(164),nt=n(203),at=n(80),rt=n.n(at),ct=n(112),it=n.n(ct),st=n(110),ot=n.n(st),ut=n(111),dt=n.n(ut),lt=n(81),jt=n.n(lt),bt=Object(P.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.unsplash.com/photo-1606638436412-23517031f19a?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=668&q=80)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},modal:{outline:"none",position:"absolute",width:400,borderRadius:10,backgroundColor:"white",boxShadow:e.shadows[5],padding:e.spacing(10)}}})),pt=function(){var e=bt(),t=Object(j.b)(),n=Object(o.useState)(""),a=Object(E.a)(n,2),r=a[0],c=a[1],i=Object(o.useState)(""),u=Object(E.a)(i,2),d=u[0],l=u[1],b=Object(o.useState)(""),p=Object(E.a)(b,2),f=p[0],h=p[1],O=Object(o.useState)(!0),x=Object(E.a)(O,2),g=x[0],v=x[1],y=Object(o.useState)(""),C=Object(E.a)(y,2),S=C[0],U=C[1],P=Object(o.useState)(!1),D=Object(E.a)(P,2),F=D[0],N=D[1],R=Object(o.useState)(null),L=Object(E.a)(R,2),M=L[0],V=L[1],B=function(){var e=Object(A.a)(I.a.mark((function e(){var n,a,c,i,s,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.createUserWithEmailAndPassword(r,d);case 2:if(a=e.sent,c="",!M){e.next=14;break}return i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,s=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return i[e%i.length]})).join(""),o=s+"_"+M.name,e.next=11,k.ref("avatars/".concat(o)).put(M);case 11:return e.next=13,k.ref("avatars").child(o).getDownloadURL();case 13:c=e.sent;case 14:return e.next=16,null===(n=a.user)||void 0===n?void 0:n.updateProfile({displayName:f,photoURL:c});case 16:return t(m({displayName:f,photoUrl:c,role:"user"})),e.next=19,J.push("/feed");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signInWithEmailAndPassword(r,d);case 2:if("admin@example.com"!==r){e.next=7;break}return e.next=5,J.push("/admin");case 5:e.next=9;break;case 7:return e.next=9,J.push("/feed");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signInWithPopup(_).catch((function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.sendPasswordResetEmail(S).then((function(){N(!1),U("")})).catch((function(e){alert(e.message),U("")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=!r||d.length<6,H=!f||!r||d.length<6||!M;return Object(s.jsxs)($e.a,{container:!0,component:"main",className:e.root,children:[Object(s.jsx)(et.a,{}),Object(s.jsx)($e.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(s.jsx)($e.a,{item:!0,xs:12,sm:8,md:5,component:tt.a,elevation:6,square:!0,children:Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(Ve.a,{className:e.avatar,children:Object(s.jsx)(ot.a,{})}),Object(s.jsx)(q.a,{component:"h1",variant:"h5","data-testid":"h1",children:g?"Login":"Register"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,children:[!g&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,"data-testid":"username",id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:f,onChange:function(e){h(e.target.value)}}),Object(s.jsx)(pe.a,{textAlign:"center",children:Object(s.jsx)(W.a,{children:Object(s.jsxs)("label",{children:[Object(s.jsx)(dt.a,{fontSize:"large",className:M?jt.a.login_addIconLoaded:jt.a.login_addIcon}),Object(s.jsx)("input",{className:jt.a.login_hiddenIcon,type:"file",onChange:function(e){e.target.files[0]&&(V(e.target.files[0]),e.target.value="")}})]})})})]}),Object(s.jsx)(je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,"data-testid":"email",id:"email","aria-label":"Email Address",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:r,onChange:function(e){c(e.target.value)}}),Object(s.jsx)(je.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password","aria-label":"Password",label:"Password",type:"password","data-testid":"password",id:"password",autoComplete:"current-password",value:d,onChange:function(e){l(e.target.value)}}),Object(s.jsx)(fe.a,{disabled:g?Y:H,fullWidth:!0,variant:"contained",color:"primary",className:e.submit,"data-testid":"authButton",onClick:g?Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))):Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:g?"Login":"Register"}),Object(s.jsxs)($e.a,{container:!0,children:[Object(s.jsx)($e.a,{item:!0,xs:!0,children:Object(s.jsx)("span",{onClick:function(){return N(!0)},children:"Forgot password?"})}),Object(s.jsx)($e.a,{item:!0,"aria-label":"changeScreen",children:Object(s.jsx)("span",{onClick:function(){return v(!g)},children:g?"Create new account?":"Back to login"})})]}),Object(s.jsx)(fe.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,startIcon:Object(s.jsx)(it.a,{}),onClick:T,children:"Sign In with Google"})]}),Object(s.jsx)(nt.a,{open:F,onClose:function(){return N(!1)},children:Object(s.jsx)("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.modal,children:Object(s.jsxs)("div",{children:[Object(s.jsx)(je.a,{InputLabelProps:{shrink:!0},type:"email",name:"email",label:"Reset Email",value:S,onChange:function(e){U(e.target.value)}}),Object(s.jsx)(W.a,{onClick:G,children:Object(s.jsx)(rt.a,{})})]})})})]})})]})},ft=[{_id:"",uid:"",categoryId:"",title:"",text:"",image:"",url:"",fav:0,createdAt:null}],ht=function(){var e=Object(o.useState)(ft),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(j.c)((function(e){return e.queryParams})).slice(-1)[0].values.q,c=Object(j.c)(ce),i=Object(j.c)(ge);Object(o.useEffect)((function(){d()}),[]);var u=n.slice().sort((function(e,t){return Be(t.createdAt).localeCompare(Be(e.createdAt))})),d=function(){var e=Object(A.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/v1/search/posts?q=".concat(r),e.prev=1,e.next=4,ee.a.get(t).then((function(e){a(e.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){var t;return null===(t=i.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},b=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"\u691c\u7d22\u7d50\u679c"}),u.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a,{src:b(e.uid)}),Object(s.jsx)("p",{children:Be(e.createdAt)}),Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),e.image&&Object(s.jsx)(Ve.a,{src:e.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc: ",l(e.categoryId)]})]})}))]})},Ot=n(113),mt=n.n(Ot),xt={_id:"",uid:"",photoUrl:"",text:"",createdAt:null},gt=function(e){var t=e.match.params.id,n=Object(o.useState)(!1),a=Object(E.a)(n,2),r=a[0],c=a[1],i=Object(j.c)(Ue),u=Object(j.c)(ge),d=Object(j.c)(ce),l=Object(j.c)(He),p=Object(j.c)(x),f=Object(j.b)(),h=i.find((function(e){return e._id===t})),O=Object(j.c)((function(e){return e.userData.status})),m=Object(j.c)((function(e){return e.categoriesData.status}));Object(o.useEffect)((function(){"idle"===m&&f(me()),"idle"===O&&f(te())}),[m,O,f]);var g=d.find((function(e){return e.uid===h.uid})),v=l.filter((function(e){return e.postId===h._id})),y=function(e){var t;return null===(t=d.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username},w=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(de.a)(Object(de.a)({},t),{},{photoUrl:p.photoUrl,uid:p.uid,postId:h._id}),e.next=4,f(Ge(n));case 4:a=e.sent,Object(b.d)(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=i.find((function(e){return e.uid===p.uid})),_=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&(f(Ie(t)),J.push("/feed"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)(Ve.a,{src:g.photoUrl}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(h.uid),children:["Author: ",function(e){var t;return null===(t=d.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(h.uid)]})}),Object(s.jsx)("h1",{children:h.title}),Object(s.jsx)("p",{children:h.text}),h.image&&Object(s.jsx)(Ve.a,{src:h.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",function(e){var t;return null===(t=u.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(h.categoryId)]}),(null===k||void 0===k?void 0:k.uid)===h.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(h._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return _(h)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{}),Object(s.jsx)(mt.a,{onClick:function(){return c(!r)}}),r&&Object(s.jsxs)(s.Fragment,{children:[v.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)(Ve.a,{src:e.photoUrl}),Object(s.jsxs)("span",{children:["@",y(e.uid)]}),Object(s.jsx)("span",{children:e.text})]},e._id)})),Object(s.jsx)(M.b,{initialValues:xt,onSubmit:function(e){w(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(M.a,{children:Object(s.jsx)(je.a,{variant:"outlined",id:"outlined-basic",label:"\u30b3\u30e1\u30f3\u30c8",name:"text",type:"text",value:t.text,onChange:n,required:!0})}),Object(s.jsx)(fe.a,{type:"submit",children:Object(s.jsx)(rt.a,{})})]})}})]}),Object(s.jsx)(Ze,{})]})},vt=Object(P.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),yt=function(e){var t=e.match.params.id,n=Object(j.c)((function(e){return e.postData.posts.find((function(e){return e._id===t}))})),a={_id:n._id,uid:n.uid,title:n.title,text:n.text,categoryId:n.categoryId,url:n.url,fav:n.fav,image:n.image},r=vt(),c=Object(o.useState)(null),i=Object(E.a)(c,2),u=i[0],d=i[1],l=Object(j.c)(ge),p=Object(j.c)((function(e){return e.categoriesData.status})),f=Object(j.b)();Object(o.useEffect)((function(){"idle"===p&&f(me())}),[p,f]);var h=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a,r,c,i,s,o,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!u){e.next=25;break}return a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,r=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return a[e%a.length]})).join(""),c=r+"_"+u.name,e.next=8,k.ref("images/".concat(c)).put(u);case 8:return e.next=10,k.ref("images").child(c).getDownloadURL();case 10:return n=e.sent,e.prev=11,i=Object(de.a)(Object(de.a)({},t),{},{image:n}),e.next=15,f(ke(i));case 15:s=e.sent,Object(b.d)(s),J.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,o=Object(de.a)(Object(de.a)({},t),{},{image:""}),e.next=29,f(ke(o));case 29:d=e.sent,Object(b.d)(d),J.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e.target.files[0]&&(d(e.target.files[0]),e.target.value="")};return Object(s.jsxs)(le.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(q.a,{component:"h1",variant:"h6",children:"\u8a18\u4e8b\u3092\u7de8\u96c6\u3059\u308b"}),Object(s.jsx)(M.b,{initialValues:a,onSubmit:function(e){h(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(M.a,{children:[Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5546\u54c1\u540d",name:"title",type:"text",value:t.title,onChange:n,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u672c\u6587",name:"text",type:"text",multiline:!0,rows:10,value:t.text,onChange:n,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,select:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u30ab\u30c6\u30b4\u30ea\u30fc",name:"categoryId",type:"text",value:t.categoryId,onChange:n,required:!0,children:l.map((function(e){return Object(s.jsx)(be.a,{value:e._id,children:e.name},e.name)}))}),Object(s.jsx)(pe.a,{children:Object(s.jsx)(W.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(Oe.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:O})]})})}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:t.url,onChange:n,required:!0}),Object(s.jsx)(fe.a,{type:"submit",variant:"contained",color:"primary",className:r.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})},wt=function(e){var t=e.match.params.id,n=Object(o.useState)(1),a=Object(E.a)(n,2),r=a[0],c=a[1],i=Object(o.useState)(5),u=Object(E.a)(i,1)[0],d=Object(j.c)(ce),l=Object(j.c)(Ue),b=Object(j.c)(ge),p=Object(j.c)(x),f=Object(j.c)((function(e){return e.categoriesData.status})),h=Object(j.b)(),O=d.find((function(e){return e.uid===t})),m=l.filter((function(e){return e.uid===O.uid})),g=m.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),v=r*u,y=v-u,w=g.slice(y,v);Object(o.useEffect)((function(){"idle"===f&&h(me())}),[f,h]);var k=function(e){var t;return null===(t=b.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},_=l.find((function(e){return e.uid===p.uid})),C=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&h(Ce(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)(Ve.a,{src:O.photoUrl}),Object(s.jsxs)("p",{children:["\u30e6\u30fc\u30b6\u30fc\u540d\uff1a",O.username]}),Object(s.jsxs)("p",{children:["\u6240\u5c5e\uff1a ",O.company]}),Object(s.jsxs)("p",{children:["\u5f79\u8077\uff1a ",O.position]}),Object(s.jsxs)("p",{children:["\u81ea\u5df1\u7d39\u4ecb\uff1a ",O.bio]}),Object(s.jsx)("p",{children:O.url}),Object(s.jsxs)("h1",{children:[O.username,"\u3055\u3093\u306e\u6295\u7a3f\u8a18\u4e8b"]}),m&&w.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",k(e.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(e._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===_||void 0===_?void 0:_.uid)===O.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(e._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return C(e)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})})),Object(s.jsx)(Ke,{postsPerPage:u,totalPosts:g.length,paginate:function(e){return c(e)}}),Object(s.jsx)(Ze,{})]})},kt=Object(P.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),_t=function(e){var t=e.match,n=Object(o.useState)(null),a=Object(E.a)(n,2),r=a[0],c=a[1],i=t.params.id,u=kt(),d=Object(j.c)(ce),l=Object(j.b)(),p=d.find((function(e){return e.uid===i})),f={uid:p.uid,username:p.username,photoUrl:p.photoUrl,company:p.company,position:p.position,bio:p.bio,url:p.url};console.log("uid",p.uid);var h=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a,c,i,s,o,u,d;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!r){e.next=25;break}return a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",16,c=Array.from(crypto.getRandomValues(new Uint32Array(16))).map((function(e){return a[e%a.length]})).join(""),i=c+"_"+r.name,e.next=8,k.ref("images/".concat(i)).put(r);case 8:return e.next=10,k.ref("images").child(i).getDownloadURL();case 10:return n=e.sent,e.prev=11,s=Object(de.a)(Object(de.a)({},t),{},{image:n,uid:p.uid}),e.next=15,l(ne(s));case 15:o=e.sent,Object(b.d)(o),J.push("/feed"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),console.error(e.t0);case 23:e.next=37;break;case 25:return e.prev=25,u=Object(de.a)(Object(de.a)({},t),{},{image:p.photoUrl,uid:p.uid}),e.next=29,l(ne(u));case 29:d=e.sent,Object(b.d)(d),J.push("/feed"),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(25),console.error(e.t1);case 37:case"end":return e.stop()}}),e,null,[[11,20],[25,34]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){e.target.files[0]&&(c(e.target.files[0]),e.target.value="")};return Object(s.jsxs)(le.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(q.a,{component:"h1",variant:"h6",children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u7de8\u96c6\u3059\u308b"}),Object(s.jsx)(M.b,{initialValues:f,onSubmit:function(e){h(e)},children:function(e){var t=e.values,n=e.handleChange;return Object(s.jsxs)(M.a,{children:[Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"username",name:"username",type:"text",value:t.username,onChange:n,required:!0}),Object(s.jsx)(pe.a,{children:Object(s.jsx)(W.a,{color:"primary","aria-label":"upload image",component:"span",children:Object(s.jsxs)("label",{children:[Object(s.jsx)(Oe.a,{fontSize:"large"}),Object(s.jsx)("input",{type:"file",onChange:O})]})})}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"company",name:"company",type:"text",value:t.company,onChange:n,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"\u5f79\u8077",name:"position",type:"text",value:t.position,onChange:n,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"bio",name:"bio",type:"text",multiline:!0,rows:10,value:t.bio,onChange:n,required:!0}),Object(s.jsx)(je.a,{fullWidth:!0,variant:"outlined",id:"outlined-basic",margin:"normal",label:"URL",name:"url",type:"text",value:t.url,onChange:n,required:!0}),Object(s.jsx)(fe.a,{type:"submit",variant:"contained",color:"primary",className:u.submit,fullWidth:!0,children:"\u6295\u7a3f"})]})}})]})},Ct=function(){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"404 - Not Found!"})})},It=function(e){var t,n=e.match.params.id,a=Object(j.c)(Ue),r=Object(j.c)(ge),c=Object(j.c)(ce),i=Object(j.c)(x),o=Object(j.b)(),u=a.filter((function(e){return e.categoryId===n})),d=r.find((function(e){return e._id===n})).name,l=u.slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),b=function(e){var t;return null===(t=r.find((function(t){return t._id===e})))||void 0===t?void 0:t.name},p=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username},f=function(e){var t;return null===(t=c.find((function(t){return t.uid===e})))||void 0===t?void 0:t.photoUrl},h=a.find((function(e){return e.uid===i.uid})),O=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&o(Ce(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:d}),(null===(t=l[0])||void 0===t?void 0:t._id)&&Object(s.jsx)(s.Fragment,{children:null===l||void 0===l?void 0:l.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a,{src:f(e.uid)}),Object(s.jsx)("p",{children:Object(s.jsxs)(U.a,{to:"/user/profile/".concat(e.uid),children:["Author: ",p(e.uid)]})}),Object(s.jsx)("h1",{children:e.title}),Object(s.jsx)("p",{children:e.text}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",b(e.categoryId)]}),Object(s.jsx)(U.a,{to:"/post/detail/".concat(e._id),children:"\u7d9a\u304d\u3092\u8aad\u3080"}),(null===h||void 0===h?void 0:h.uid)===e.uid?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{children:Object(s.jsx)(U.a,{to:"/post/edit/".concat(e._id),children:"\u7de8\u96c6\u3059\u308b"})}),Object(s.jsx)("button",{onClick:function(){return O(e)},children:"\u524a\u9664\u3059\u308b"})]}):Object(s.jsx)(s.Fragment,{})]})}))}),Object(s.jsx)(Ze,{})]})},At=function(){var e=Object(j.c)((function(e){return e.postData.status})),t=Object(j.c)((function(e){return e.userData.status})),n=Object(j.c)((function(e){return e.categoriesData.status})),a=Object(j.b)();return Object(o.useEffect)((function(){"idle"===e&&a(ye()),"idle"===t&&a(te()),"idle"===n&&a(me())}),[e,t,n,a]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u7ba1\u7406\u753b\u9762"}),Object(s.jsx)("button",{onClick:Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.signOut();case 2:return e.next=4,J.push("/login");case 4:case"end":return e.stop()}}),e)}))),children:"logout"}),Object(s.jsxs)("p",{children:[Object(s.jsx)(U.a,{to:"/admin/post",children:"\u6295\u7a3f\u8a18\u4e8b\u7ba1\u7406"}),Object(s.jsx)(U.a,{to:"/admin/user",children:"\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406"})]})]})},St=function(){var e=Object(j.c)(ce),t=Object(j.b)(),n=e.filter((function(e){return"user"===e.role}));console.log(n);var a=function(){var e=Object(A.a)(I.a.mark((function e(n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){e.next=5;break}return e.next=3,t(ae(n));case 3:return e.next=5,t(Ae(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u753b\u9762"}),n&&Object(s.jsx)(s.Fragment,{children:n.map((function(e){return Object(s.jsxs)("li",{children:[Object(s.jsx)("ul",{children:e.username}),Object(s.jsx)("button",{onClick:function(){return a(e)},children:"\u524a\u9664"})]},e.uid)}))})]})},Ut=function(){var e,t=Object(o.useState)(1),n=Object(E.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(5),i=Object(E.a)(c,1)[0],u=Object(j.c)(Ue).slice().sort((function(e,t){return t.createdAt.localeCompare(e.createdAt)})),d=a*i,l=d-i,b=u.slice(l,d);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u6295\u7a3f\u8a18\u4e8b\u7ba1\u7406\u753b\u9762"}),(null===(e=b[0])||void 0===e?void 0:e._id)&&Object(s.jsx)(s.Fragment,{children:b.map((function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:e.title}),Object(s.jsx)(U.a,{to:"/admin/post/".concat(e._id),children:"\u8a73\u7d30\u3092\u78ba\u8a8d\u3059\u308b"})]})}))}),Object(s.jsx)(Ke,{postsPerPage:i,totalPosts:u.length,paginate:function(e){return r(e)}})]})},Pt=function(e){var t=e.match.params.id,n=Object(j.c)(Ue),a=Object(j.c)(ge),r=Object(j.c)(ce),c=Object(j.b)(),i=n.find((function(e){return e._id===t})),o=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u8a18\u4e8b\u3092\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")&&(c(Ie(t)),J.push("/admin/post"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u8a18\u4e8b\u8a73\u7d30"}),Object(s.jsxs)("p",{children:["Author: ",function(e){var t;return null===(t=r.find((function(t){return t.uid===e})))||void 0===t?void 0:t.username}(i.uid)]}),Object(s.jsx)("h1",{children:i.title}),Object(s.jsx)("p",{children:i.text}),i.image&&Object(s.jsx)(Ve.a,{src:i.image}),Object(s.jsxs)("p",{children:["\u30ab\u30c6\u30b4\u30ea\u30fc\uff1a ",function(e){var t;return null===(t=a.find((function(t){return t._id===e})))||void 0===t?void 0:t.name}(i.categoryId)]}),Object(s.jsx)("button",{onClick:function(){return o(i)},children:"\u524a\u9664"})]})},Dt=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"\u3042\u306a\u305f\u306e\u30d3\u30b8\u30cd\u30b9\u306b\u5f79\u7acb\u3064ICT\u88fd\u54c1\u304c\u304d\u3063\u3068\u898b\u3064\u304b\u308b!"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:Object(s.jsx)(ue.c,{history:J,children:Object(s.jsx)(U.a,{to:"/login",children:"\u30ed\u30b0\u30a4\u30f3\u30fb\u65b0\u898f\u767b\u9332\u306f\u3053\u3061\u3089\u304b\u3089"})})}),Object(s.jsx)("h3",{children:"\u5e45\u5e83\u3044\u88fd\u54c1\u60c5\u5831\u3092\u7db2\u7f85!"})]})]})},Ft=function(){var e=Object(j.c)((function(e){return e.queryParams})).slice(-1)[0].values.q;return Object(s.jsxs)(ue.d,{children:[Object(s.jsx)(ue.b,{exact:!0,path:"/",component:Dt}),Object(s.jsx)(ue.b,{exact:!0,path:"/login",component:pt}),Object(s.jsx)(ue.b,{exact:!0,path:"/index.html",component:Dt}),Object(s.jsx)(ue.b,{exact:!0,path:"/feed",component:Qe}),Object(s.jsx)(ue.b,{exact:!0,path:"/add",component:Le}),Object(s.jsx)(ue.b,{exact:!0,path:"/search?q=".concat(e),component:ht}),Object(s.jsx)(ue.b,{exact:!0,path:"/post/detail/:id",component:gt}),Object(s.jsx)(ue.b,{exact:!0,path:"/post/edit/:id",component:yt}),Object(s.jsx)(ue.b,{exact:!0,path:"/user/profile/:id",component:wt}),Object(s.jsx)(ue.b,{exact:!0,path:"/user/edit/:id",component:_t}),Object(s.jsx)(ue.b,{exact:!0,path:"/category/:id",component:It}),Object(s.jsx)(ue.b,{exact:!0,path:"/admin",component:At}),Object(s.jsx)(ue.b,{exact:!0,path:"/admin/user",component:St}),Object(s.jsx)(ue.b,{exact:!0,path:"/admin/post",component:Ut}),Object(s.jsx)(ue.b,{exact:!0,path:"/admin/post/:id",component:Pt}),Object(s.jsx)(ue.b,{component:Ct})]})},Nt=function(){var e=Object(j.b)();return Object(o.useEffect)((function(){var t=w.onAuthStateChanged((function(t){e(t?h({uid:t.uid,photoUrl:t.photoURL,displayName:t.displayName}):O())}));return function(){t()}}),[e]),Object(s.jsxs)(ue.c,{history:J,children:[Object(s.jsx)(oe,{}),Object(s.jsx)(Ft,{})]})},Wt=Object(b.a)({reducer:{auth:g,postData:Pe,userData:ie,categoriesData:ve,queryParams:H,commentData:Xe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(s.jsx)(u.a.StrictMode,{children:Object(s.jsx)(j.a,{store:Wt,children:Object(s.jsx)(Nt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports={login_toggleMode:"Auth_login_toggleMode__1q3nF",login_modal:"Auth_login_modal__2XUe2",login_reset:"Auth_login_reset__1CRmT",login_hiddenIcon:"Auth_login_hiddenIcon__3EEOO",login_addIcon:"Auth_login_addIcon__2hF6-",login_addIconLoaded:"Auth_login_addIconLoaded__30_sD"}}},[[159,1,2]]]);
//# sourceMappingURL=main.44c0f52c.chunk.js.map